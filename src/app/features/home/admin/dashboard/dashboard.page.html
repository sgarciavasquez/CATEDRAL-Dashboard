<app-header></app-header>

<div class="min-h-screen flex flex-col bg-[#f7f9fc]">

  <div class="container-7xl py-4 md:py-6">

    <!-- Layout principal -->
    <div class="grid grid-cols-12 gap-4 md:gap-6">

      <!-- SIDEBAR -->
      <aside class="col-span-12 md:col-span-3">
        <!-- En móvil: card arriba -->
        <div class="md:hidden mb-4">
          <div class="bg-white rounded-xl p-4 ring-1 ring-[#e8ecf4]">
            <p class="text-sm font-semibold mb-2">Menú</p>
            <app-admin-sidebar></app-admin-sidebar>
          </div>
        </div>

        <!-- Desktop: sidebar normal a la izquierda -->
        <div class="hidden md:block">
          <app-admin-sidebar></app-admin-sidebar>
        </div>
      </aside>

      <!-- CONTENIDO -->
      <section class="col-span-12 md:col-span-9">

        <h1 class="text-xl md:text-2xl font-semibold text-[#2f3f56] mb-4">
          Dashboard de Pedidos
        </h1>

        <!-- Selector de mes -->
        <div class="flex justify-end mb-4">
          <select
            class="rounded-lg border px-3 py-2 text-sm bg-white shadow-sm"
            [(ngModel)]="selectedMonth"
            (change)="filterMonth()"
          >
            <option *ngFor="let m of availableMonths" [value]="m">
              {{ m }}
            </option>
          </select>
        </div>

        <!-- KPIs -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6">

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4] text-center md:text-left">
            <p class="text-[12px] text-neutral-500">Total pedidos</p>
            <p class="text-2xl font-bold">{{ stats.total }}</p>
          </div>

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4] text-center md:text-left">
            <p class="text-[12px] text-neutral-500">Pendientes</p>
            <p class="text-2xl font-bold text-amber-600">{{ stats.pending }}</p>
          </div>

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4] text-center md:text-left">
            <p class="text-[12px] text-neutral-500">Completados</p>
            <p class="text-2xl font-bold text-green-600">{{ stats.completed }}</p>
          </div>

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4] text-center md:text-left">
            <p class="text-[12px] text-neutral-500">Cancelados</p>
            <p class="text-2xl font-bold text-red-600">{{ stats.cancelled }}</p>
          </div>

          <div class="col-span-2 md:col-span-4 rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4] text-center mt-1">
            <p class="text-[12px] text-neutral-500">Ganancia del mes</p>
            <p class="text-2xl font-bold text-[#2f3f56]">
              ${{ stats.amountTotal | number:'1.0-0' }}
            </p>
          </div>

        </div>

        <!-- GRÁFICOS -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4]">
            <h2 class="text-base md:text-lg font-semibold text-[#2f3f56] mb-2">
              Distribución de Estados
            </h2>
            <app-status-donut [stats]="stats"></app-status-donut>
          </div>

          <div class="rounded-xl bg-white p-4 ring-1 ring-[#e8ecf4]">
            <h2 class="text-base md:text-lg font-semibold text-[#2f3f56] mb-2">
              Pedidos por mes
            </h2>
            <app-monthly-bar-chart [monthly]="monthly"></app-monthly-bar-chart>
          </div>

        </div>
      </section>
    </div>
  </div>

  <app-footer class="mt-auto"></app-footer>
</div>
