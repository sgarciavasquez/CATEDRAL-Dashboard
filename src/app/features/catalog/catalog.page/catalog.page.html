<app-header></app-header>

<main class="container-7xl py-6 grid grid-cols-12 gap-6">
  <!-- Sidebar categorías -->
  <aside class="col-span-12 md:col-span-3">
    <div class="bg-white rounded-xl shadow ring-1 ring-[#e8ecf4] overflow-hidden">
      <div class="px-4 py-3 bg-[#2f3f56] text-white font-semibold text-sm">Categorías</div>
      <nav class="p-2 flex flex-col text-sm">

        <!-- Botón para ver todas -->
        <a [routerLink]="['/catalogo']" class="px-4 py-2 rounded hover:bg-stone-100"
          [class.bg-[#e9eef8]]="!selectedCategory">
          Todas
        </a>

        <!-- Lista dinámica de categorías desde la API -->
        <a *ngFor="let c of categories" [routerLink]="['/catalogo']" [queryParams]="{ cat: c.name }"
          class="px-4 py-2 rounded hover:bg-stone-100 capitalize"
          [class.bg-[#e9eef8]]="selectedCategory === c.name.toLowerCase()">
          {{ c.name }}
        </a>
      </nav>
    </div>
  </aside>

  <!-- Contenido -->
  <section class="col-span-12 md:col-span-9">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg md:text-xl font-semibold">{{ title }}</h2>
      <div class="text-xs text-neutral-500">Ordenar por: <span class="underline">Más vendidos</span></div>
    </div>

    <div *ngIf="loading" class="text-sm text-neutral-500">Cargando…</div>

    <ng-container *ngIf="!loading">
      <div *ngIf="items.length === 0" class="text-sm text-neutral-500">No hay productos para esta categoría.</div>
      <div class="grid gap-4 md:gap-6 md:grid-cols-2">
        <app-product-card *ngFor="let p of items" [product]="p"></app-product-card>
      </div>
    </ng-container>
  </section>
</main>

<app-footer class="mt-auto"></app-footer>